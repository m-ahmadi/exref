<style>
div[draggable=true] {
	width: 20px; height: 20px;
	background: red;
}

.dropzone {
	width: 150px;
	height: 150px;
	border: 1px dashed grey;
	margin: 1em 4em;
}

p { background: dodgerblue; }
</style>

<div class="draggable"></div>

<div class="dropzone">
	<p>foo</p>
	<p>bar</p>
</div>

<div class="dropzone">
	<p>hello</p>
	<p>world</p>
</div>


<script>
log = console.log;
$ = (selector, ctx=document) => [...ctx.querySelectorAll(selector)];

$('.draggable').forEach(draggable);
$('.dropzone').forEach(droppable);

function draggable(el) {
	var n = 0;
	if (!el.id) el.setAttribute('id', '_dnd'+(n++));
	el.setAttribute('draggable', true);
	el.ondragstart = dragstart;
	
	function dragstart(e) {
		e.dataTransfer.effectAllowed = 'move';
		e.dataTransfer.dropEffect = 'move';
		e.dataTransfer.setData('text/plain', e.target.id);
	}
}

function droppable(el) {
	el.ondragenter = dragenter;
	el.ondragleave = dragleave;
	el.ondragover = dragover;
	el.ondrop = drop;
	
	function dragenter(e) {
		e.target.style.border = '2px dashed dodgerblue';
	}
	function dragleave(e) {
		e.target.style.border = '';
	}
	function dragover(e) {
		e.preventDefault();
		//log(e.clientX, e.clientY);
		//log(this.offsetLeft, this.offsetTop);
		log(e.clientX - this.offsetLeft, e.clientY - this.offsetTop);
		var t = getElementsFromRect('p', 0,0, e.clientX-this.offsetLeft, e.clientY-this.offsetTop, this)
		log(t);
		//const box = cur.getBoundingClientRect();
	}

	function drop(e) {
		e.preventDefault();
		var id = e.dataTransfer.getData('text/plain');
		e.target.append( document.getElementById(id) );
	}
}

function getElementsFromRect(selector, x1, y1, x2, y2, ctx=document) {
	var res = [];
	ctx.querySelectorAll(selector).forEach(i => {
		var rect = i.getBoundingClientRect();
		var x = i.offsetLeft;
		var y = i.offsetTop;
		var w = rect.width;
		var h = rect.height;
		if (x >= x1 && y >= y1 && x+w <= x2 && y+h <= y2) {
			res.push(i);
		}
	});
	return res;
}
</script>